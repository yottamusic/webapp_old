// Main
function cmf_G001(e){for(var n=$("input[type=radio][name="+e+"]"),c=0;c<n.length;c++)if(n.eq(c).prop("checked"))return n.eq(c).val()}function cmf_G002(e){for(var n=$("input[type=checkbox][name="+e+"]"),c="",t=0;t<n.length;t++)n.eq(t).prop("checked")&&(c=c?c+","+n.eq(t).val():n.eq(t).val());return c}function cmf_G003(){$("input:not(.selection-search)").on("change",function(){for(var e=0;e<cmf_2.length;e++){var n=cmf_2[e];try{var c=window[n]();c&&!0}catch(e){}}})}function cmf_0000_1(e){var n=e.which;return!!cmf_1.includes(n)&&(e.stopPropagation(),e.preventDefault(),n)}function cmf_0000_2(e,n,c=null){var t,a,o=cmf_0000_1(e);if(o){e.preventDefault(),n.hasClass("cmf-cr")?(t=n.find("input"),a=!1):(t=n.find("li"),a=!0);var s=parseInt(n.data("selection-pos"));if(isNaN(s)&&(s=0),13==o||32==o){if(a)return s>0&&s--,cmf_0000_4(t.eq(s)),!0;if(1==c.prop("checked")?c.prop("checked",!1):c.prop("checked",!0),"radio"==c.attr("type")){var r=$(".cmf-cr label");for(i=0;i<r.length;i++)0==r.eq(i).parent("div").children("input").prop("checked")&&r.eq(i).removeClass("checked")}return c}if(38==o?s--:40==o&&s++,1>s?s=1:s>t.length&&(s=t.length),n.data("selection-pos",s),a)return t.removeClass("selected"),t.eq(s-1).addClass("selected"),!0;var f=t.eq(s-1);return f.trigger("focus"),f}}function cmf_0000_3(){var e=$(".cmf-group");for(let n=0;n<e.length;n++)""==e.eq(n).children("input").val()?(null!=e.eq(n).children("input").attr("required")&&e.eq(n).hasClass("active")&&e.eq(n).addClass("warning"),e.eq(n).removeClass("active").children(".cmf-dropdown").removeClass("open")):e.hasClass("block-base")&&""==e.eq(n).find("input").val()?(null!=e.eq(n).find("input").attr("required")&&e.eq(n).hasClass("active")&&e.eq(n).addClass("warning"),e.eq(n).removeClass("active")):e.eq(n).children("textarea").length>0?""==e.eq(n).children("textarea").val()&&e.eq(n).removeClass("active"):e.eq(n).children(".cmf-dropdown").removeClass("open"),e.removeClass("focused");$(".cmf-cr label").removeClass("selected")}function cmf_0000_4(e){var n=e.parents(".cmf-group"),c=e.text();c=c.toLowerCase().replace(" ","-"),n.children("input").prop("readonly",!1).val().prop("readonly",!0),n.children(".cmf-dropdown").removeClass("open"),n.find("li").removeClass("selected"),n.find(".clear-selection").remove(),e.addClass("selected").append('<span class="clear-selection"><span></span></span>'),cmf_0000_5()}function cmf_0000_5(){$(".clear-selection").on("click",function(e){e.stopPropagation();var n=$(this).parents(".cmf-group");n.children("input").prop("readonly",!1).val("").prop("readonly",!0),$(this).parents(".cmf-dropdown").removeClass("open"),n.find("li").removeClass("selected"),$(this).remove()})}function cmf_0000_6(e,n){return n+="-csv",$("[name="+n+"]").length?n:(e.prepend(function(){return'<input type="text" name="'+n+'" class="d-none hidden"/>'}),n)}function cmf_0001(){for(var e=$(".cmf-cr").find("input"),n=0;n<e.length;n++){var c=e.eq(n);"checked"==c.attr("checked")&&c.parent("div").find("label").addClass("selected checked")}}function cmf_0002(){var e=$(".cmf-group:not(.cmf-cr) input:not(.selection-search)");e.on("keydown",function(e){cmf_0000_1(e)}),e.on("click keyup",function(e){e.stopPropagation();cmf_0000_1(e);var n=$(this).parents(".cmf-group");cmf_0000_2(e,n)||(cmf_0000_3(),n.addClass(function(){return"active focused"}).children(".cmf-dropdown").css("opacity","0").addClass("open").animate({opacity:1},100,function(){$(this).children("input").trigger("focus").val(""),$(this).find("li").css("display","")}))})}function cmf_0003(){var e=$(".cmf-cr input");e.on("keydown",function(e){cmf_0000_1(e)}),e.on("click keyup",function(e){e.stopPropagation();var n=cmf_0000_1(e);if("click"==e.type||n||9==e.which){var c=$(this),t=c.parent("div"),i=$(this).parents(".cmf-group"),a=cmf_0000_2(e,c.parents(".cmf-cr"),c);a&&(t=a.parent("div")),cmf_0000_3();var o=t.children("label");if(t.find(".checkbox, .radio").addClass("animate").bind("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(e){$(this).removeClass("animate")}),i.find("label").removeClass("selected"),o.addClass("selected"),13==n||32==n||"click"==e.type)"radio"==c.attr("type")&&i.find("label").removeClass("checked"),1==c.prop("checked")?o.addClass("checked"):o.removeClass("checked");else if(e.shiftKey&&9==e.which){var s=parseInt(i.data("selection-pos"));isNaN(s)&&(s=0),options=i.find("input"),s<1?s=1:s>options.length&&(s=options.length),s>1&&s<=options.length&&(s--,i.data("selection-pos",s))}else if(9==e.which){s=parseInt(i.data("selection-pos"));isNaN(s)&&(s=0),options=i.find("input"),s<0?s=0:s>options.length&&(s=options.length+1),s>=0&&s<options.length&&(s++,i.data("selection-pos",s))}}})}function cmf_0004(){var e=$(".cmf-dropdown, .cmf-dropdown > input");e.on("keydown",function(e){cmf_0000_1(e)}),e.on("click keyup",function(e){e.stopPropagation();cmf_0000_1(e);var n=$(this).parents(".cmf-group");cmf_0000_2(e,n)||null!=n.children("input").attr("required")&&n.removeClass("active").addClass("warning")}),$(".cmf-dropdown li").on("click",function(e){e.stopPropagation(),cmf_0000_4($(this))}),$(".selection-search").on("input",function(){var e=$(this).val(),n=$(this).parent(".cmf-dropdown").find("li");if(""==e)n.css("display","");else for(let i=0;i<n.length;i++){var c=n.eq(i).text(),t=new RegExp(e,"gi");null==c.match(t)?n.eq(i).css("display","none"):n.eq(i).css("display","")}})}function cmf_0005(){$(".cmf-group > textarea").on("click keyup",function(e){if(e.stopPropagation(),9==e.which||"click"==e.type){var n=$(this).parent(".cmf-group");cmf_0000_3(),n.addClass("active focused").removeClass("warning")}})}function cmf_0006(){$(".submit-button").on("click keyup",function(e){cmf_0000_3()})}function cmf_0007(){$(".cmf-ajax-submit").on("submit",function(e){e.preventDefault(),$.ajax({type:$(this).data("method"),url:$(this).data("action"),data:$("form").serialize(),success:function(){var e=$(this).data("success-function");try{e()}catch(e){}}})})}function cmf_0008(){$(".cmf-toggle-view").on("click",function(){$(this).hasClass("visible")?$(this).removeClass("visible").parents(".cmf-group").find("input").attr("type","password"):$(this).addClass("visible").parents(".cmf-group").find("input").attr("type","text")})}function cmf_0009(){for(var e=$(".cmf-cr[data-convert-csv]"),n=0;n<e.length;n++){var c=e.eq(n).find("input[type=checkbox]").eq(0),t=c.attr("name"),i=cmf_0000_6(e.eq(n),t),a=cmf_G002(t);$("[name="+i+"]").val(a)}}function cmf_init(){cmf_0001(),cmf_0002(),cmf_0003(),cmf_0004(),cmf_0005(),cmf_0006(),cmf_0007(),cmf_0008(),cmf_0009(),$(window).on("click",function(){cmf_0000_3()}),cmf_G003(),cmf_2.push("cmf_0009")}function cmf_run(e){cmf_2.push(e)}var cmf_1=[13,32,38,40],cmf_2=[];

// Validation
function cmf_0001_2(a){if(a.length<4||a.length>30)return!1;var s=/(^([^\w]|[\_]|[\-])|([^\w\-])|([\_]$|[\-]$)|([\_]{2}|[\-]{2}))/;return!s.test(a)}function cmf_0001_1(a){var s=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return s.test(a)}function cmf_0010(){for(var a=$(".cmf-group:not(.cmf-cr) input:not(.selection-search)"),s=0;s<a.length;s++)null!=a.eq(s).attr("validate")&&a.eq(s).on("keyup",function(){if("email"==$(this).attr("validate")&&(cmf_0001_1($(this).val())?($(this).data("validated","true"),$(this).parents(".cmf-group").removeClass("warning").addClass(function(){return $(this).data("validated-class")})):($(this).data("validated","false"),$(this).parents(".cmf-group").addClass("warning").removeClass(function(){return $(this).data("validated-class")}))),"username"==$(this).attr("validate")&&(cmf_0001_2($(this).val())?($(this).data("validated","true"),$(this).parents(".cmf-group").removeClass("warning").addClass(function(){return $(this).data("validated-class")})):($(this).data("validated","false"),$(this).parents(".cmf-group").addClass("warning").removeClass(function(){return $(this).data("validated-class")}))),"password"==$(this).attr("validate")){var a=$(this),s=$("#"+$(this).attr("linked")),t=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})");if(t.test(a.val())?a.parents(".cmf-group").find(".icon-shield").attr("title","Password strength is strong").removeClass("text-danger").addClass("text-success"):a.parents(".cmf-group").find(".icon-shield").attr("title","Password strength is weak").removeClass("text-success").addClass("text-danger"),!a.val())return;if(!s.val())return;a.val()==s.val()?($("#password-validation").text("Password matches").removeClass("text-danger"),a.parents(".cmf-group").addClass("success").removeClass("danger"),s.parents(".cmf-group").addClass("success").removeClass("danger")):($("#password-validation").text("Password do not matches").addClass("text-danger"),a.parents(".cmf-group").removeClass("success").addClass("danger"),s.parents(".cmf-group").removeClass("success").addClass("danger"))}})}function cmf_validation_init(){cmf_0010()}

// Condition
function cmf_0011(){for(var i=$("input"),t=0;t<i.length;t++){var a=i.eq(t),n=a.parents(".cmf-group"),o=n.data("condition");if(o){var c=a.attr("type"),e=a.attr("name"),f=!1;if(f="radio"==c?cmf_G001(e):"checkbox"==c?cmf_G002(e):a.val(),f){if(o=o.split("="),condition_key=o[0],condition_value=o[1],"any"==condition_value){n.data("condition-satisfied","true");continue}var r=condition_value.split(","),s=!1;if(Array.isArray(r))for(var d=0;d<r.length;d++)f==r[d]&&(s=!0);else f==condition_value&&(s=!0);if(s){n.data("condition-satisfied","true");continue}}n.data("condition-satisfied","false")}}return!0}function cmf_0012(){for(var i=$("[data-show-if-any]"),t=0;t<i.length;t++){var a=i.eq(t).data("show-if-any");a=a.split("=");var n=$("[name="+a[0]+"]"),o=n.attr("type"),c=!1;c="radio"==o?cmf_G001(a[0]):"checkbox"==o?cmf_G002(a[0]):n.val();for(var e=a[1].split(","),f=!1,r=0;r<e.length;r++)c&&c==e[r]&&(f=!0);f?i.eq(t).css("display",""):i.eq(t).css("display","none")}return!0}function cmf_condition_init(){cmf_0011(),cmf_0012(),cmf_2.push("cmf_0011"),cmf_2.push("cmf_0012")}

// Stepform
function cmf_get_next_step(t){var e=$(".step-group").length;if(t>e)return e;t=parseInt(t)+1;var a=$(".step-group").eq(t-1);return null==a.data("step-condition")?t:"true"==a.data("step-condition-satisfied")?t:cmf_get_next_step(t)}function cmf_get_back_step(t){if(t=parseInt(t)-1,t<=1)return 1;var e=$(".step-group").eq(t-1);return null==e.data("step-condition")?t:"true"==e.data("step-condition-satisfied")?t:cmf_get_back_step(t)}function cmf_step_next(t=null){var e=$(".step-group"),a=e.length,s=$(".step-form-footer-nav"),n=parseInt(s.data("curr-step"));if(n!=a){var p=cmf_get_next_step(n);p>a||(current_step_ele=e.eq(n-1),next_step_ele=e.eq(p-1),s.data("curr-step",p),e.removeClass("active").eq(p-1).addClass("active"),cmf_0016(),cmf_step_nav="forward",cmf_step+=1,cmf_step_index=p-1,t&&t())}}function cmf_step_back(t=null){var e=$(".step-group"),a=$(".step-form-footer-nav"),s=parseInt(a.data("curr-step"));if(1!=s){var n=cmf_get_back_step(s);a.data("curr-step",n),e.removeClass("active").eq(n-1).addClass("active"),cmf_0016(),cmf_step_nav="backward",cmf_step-=1,cmf_step_index=n-1,t&&t()}}function cmf_0013(t=null){$(".step-footer button[type=submit]").css("display","none"),$(".step-footer").prepend(function(){var e='<div class="step-form-footer-nav">';return e=e+'<span class="step_back disabled first-step '+$(this).data("back-btn-class"),e=e+'" onclick="cmf_step_back('+t+');">Back</span>',e=e+'<span class="step_next '+$(this).data("next-btn-class"),e=e+'" onclick="cmf_step_next('+t+');">Next</span>',e+="</div>",e}),$(".step-form-footer-nav").data("curr-step",1)}function cmf_0014(){for(var t=$(".step-group"),e=0;e<t.length;e++){var a=t.eq(e);if(null!=a.data("step-validate")){for(var s=a.data("step-validate").split(","),n=!0,p=0;p<s.length;p++){var r=s[p],c=$("[data-condition-id="+r+"]");"true"!=c.data("condition-satisfied")&&(n=!1)}n?a.data("step-validated","true"):a.data("step-validated","false")}}}function cmf_0015(){for(var t=$(".step-group"),e=0;e<t.length;e++){var a=t.eq(e);if(null!=a.data("step-condition")){var s=a.data("step-condition").split("="),n=s[0],p=s[1],r=$("input[name="+n+"]"),c=r.attr("type"),i=!1;if(i="radio"==c?cmf_G001(n):"checkbox"==c?cmf_G002(n):r.val(),i){if("any"==p){t.data("step-condition-satisfied","true");continue}var d=p.split(","),f=!1;if(Array.isArray(d))for(var o=0;o<d.length;o++)i==d[o]&&(f=!0);else i==condition_value&&(f=!0);if(f){t.data("step-condition-satisfied","true");continue}}t.data("step-condition-satisfied","false")}}}function cmf_0016(){var t=$(".step-group"),e=t.length,a=$(".step-form-footer-nav"),s=a.data("curr-step"),n=!1;if(1==s?($(".step_back").addClass("disabled first-step"),n=!0):s==e?($(".step_back").removeClass("disabled"),$(".step_next").addClass("disabled last-step"),$(".step-footer button[type=submit]").css("display","")):s>1&&s<e&&($(".step_back").removeClass("disabled"),n=!0),n){current_step_ele=t.eq(s-1);var p=current_step_ele.data("step-validate");null==p||"true"==current_step_ele.data("step-validated")?$(".step_next").removeClass("disabled"):null!=p&&$(".step_next").addClass("disabled"),$(".step-footer button[type=submit]").css("display","none")}}function cmf_stepform_init(t=null){cmf_0013(t),cmf_0014(),cmf_0015(),cmf_0016(),cmf_2.push("cmf_0014"),cmf_2.push("cmf_0015"),cmf_2.push("cmf_0016")}var cmf_step_nav=!1,cmf_step=1,cmf_step_index=0;

// Datatable
function cmf_0004_1(){var t=$(".cmf-data-table table"),a=parseInt(t.data("row-number"));a>0?a++:a=1,t.data("row-number",a);for(var e=$(".cmf-dtr-str td"),n="<tr>",c=0;c<e.length;c++){var d=e.eq(c).children("input");n=n+'<td><input name="'+d.data("name")+"-"+a,n=n+'" data-in-name="'+d.data("name"),n=n+'" type="'+d.data("type"),n=n+'" placeholder="'+d.data("placeholder"),c==e.length-1?n+='" /><span class="icon icon-close"></span></td>':n+='" /></td>'}return n+"</tr>"}function cmf_0004_2(){$("#dt-total-fields").val(function(){return $(".cmf-data-table table tr").length-1}),$(".cmf-data-table .icon-close").on("click",function(){$(this).parents("tr").remove(),cmf_0004_3()})}function cmf_0004_3(){for(var t=$(".cmf-dtr-str td input"),a=0;a<t.length;a++)for(var e=t.eq(a),n=e.data("name"),c=$("[data-in-name="+n+"]"),d=0;d<c.length;d++)c.eq(d).attr("name",function(){var t=d+1;return $(this).data("in-name")+"-"+t})}function cmf_0004_4(){$(".cmf-dtr-add p").on("click",function(){$(".cmf-data-table table").append(function(){return cmf_0004_1()}),cmf_0004_2()}),$(".cmf-data-table").prepend('<input id="dt-total-fields" name="dt-total-fields" class="hidden" hidden/>')}function cmf_0004_5(){$(".cmf-dt-json").on("click",function(t){if(cmf_dt_processed)cmf_dt_processed=!1;else{t.preventDefault();for(var a=new Array,e=$(".cmf-data-table tr").not(".cmf-dtr-str"),n=0;n<e.length;n++){var c=e.eq(n).find("input");a[n]=new Object;for(var d=0;d<c.length;d++){var f=c.eq(d).attr("name");a[n][f]=encodeURI(c.eq(d).val())}}var r=JSON.stringify(a);$(".cmf-data-table").prepend('<input name="cmf-dt-data" class="hidden" hidden/>'),$("[name=cmf-dt-data]").val(r),$(".cmf-data-table table input").attr("disabled","disabled"),cmf_dt_processed=!0,$(this).trigger("click")}})}function cmf_0017(){var t=$(".cmf-data-table").data("source-url"),a=$(".cmf-data-table").data("json-data");if(null!=t){var e=$(".cmf-data-table").data("source-method");e||(e="GET");var n=$(".cmf-data-table").data("api");$.ajax({cache:!1,method:e,url:t,beforeSend:function(t){t.setRequestHeader("X-API",n)}}).done(function(t){if(t&&t.length>0)for(var a=0;a<t.length;a++){$(".cmf-data-table table").append(function(){return cmf_0004_1()}),cmf_0004_2();for(var e=Object.keys(t[a]),n=0;n<e.length;n++){var c=e[n],d=t[a][c];$("input[name="+c+"]").val(decodeURI(d))}}cmf_0004_4(),cmf_0004_5()}).fail(function(){cmf_0004_4(),cmf_0004_5()})}else if(null!=a){var c=a;if(c&&c.length>0)for(var d=0;d<c.length;d++){$(".cmf-data-table table").append(function(){return cmf_0004_1()}),cmf_0004_2();for(var f=Object.keys(c[d]),r=0;r<f.length;r++){var l=f[r],m=c[d][l];$("input[name="+l+"]").val(decodeURI(m))}}cmf_0004_4(),cmf_0004_5()}else cmf_0004_4(),cmf_0004_5()}function cmf_datatable_init(t=null){cmf_0017()}var cmf_dt_processed=!1;